---
// src/pages/recalls/[id].astro
import Base from "../../layouts/Base.astro";
import AdSlot from "../../components/AdSlot.astro";
export async function getStaticPaths() {
  const recalls = (await import("../../../data/recalls.json")).default;
  return recalls.map((r) => ({ params: { id: r.id }, props: { item: r } }));
}

const { item } = Astro.props;
const title = `${item.brand} ${item.product} Recall — ${item.hazard || 'Safety Notice'}`;
const description = item.hazard || `Recall notice for ${item.product}`;
const canonical = `https://recallwatch.pages.dev/recalls/${item.id}`;
---

<Base title={title} description={description} canonical={canonical}>
      <h1>{title}</h1>
      <p><strong>Brand:</strong> {item.brand}</p>
      <p><strong>Product:</strong> {item.product}</p>
      <p><strong>Hazard:</strong> {item.hazard || '—'}</p>
      <p><strong>Distribution:</strong> {item.states?.join(', ') || 'Nationwide'}</p>
      <p><strong>Recall Class:</strong> {item.recall_class || 'N/A'}</p>
      <p><strong>Dates:</strong> Initiated {item.dates.initiation || '—'} • Reported {item.dates.report || '—'}</p>

      <section>
        <h2>What you should do</h2>
        <ul>
          <li>Stop using or consuming the product immediately.</li>
          <li>Check lot codes and dispose or return as instructed.</li>
          <li>Contact the brand or retailer for refunds or questions.</li>
        </ul>
      </section>

      <AdSlot />

      <nav>
        <p>
          See more: <a href={`/brand/${item.brandSlug}`}>More recalls from {item.brand}</a> ·
          <a href={`/category/${item.categorySlug}`}>{item.category} recalls</a>
        </p>
      </nav>

      {item.links.openfda && (
        <p>Source: <a href={item.links.openfda}>OpenFDA</a></p>
      )}
</Base>
